 "viewerSessions": {
    "session123": {
      "sessionId": "session123",
      "uid": "mall001-user123",
      "sessionType": "delivery",
      "allowedFields": ["name", "phone"],
      "createdAt": "2024-01-01T00:00:00Z",
      "expiresAt": "2024-01-01T01:00:00Z",
      "isActive": true
    }
  },


지금 결국은 팝업이 열릴때 궁극적으로는 정보제공화면을 보여주거나, 이미 정보제공을 했으면 미리 보기 화면을 보여줄텐데
그전에 로그인 유무, 개인정보 설정 (개인정보 입력 + 분산저장소 설정) 이런거 에 따라서 지금 보여줘야 하는 화면 흐름이 다르기떄문에 이렇게 한거잖아
지금 팝업이 열릴때 외부  쇼핑몰로 부터 jwt를 포스트 메세지로 받는데 그걸 지금 
로그인 했으면 그거로 정보제공화면에서 jwt의 내부를 읽어서 리얼타임데이터 베이스에서조회해서 보여주면 되는거고

구글로그인 신규가입자 -> 약관동의 팝업 -> 개인정보 입력 -> 분산저장소 설정 -> 정보제공화면 여기 보여줄때 우선 정보제공화면 보여주기전에
jwt를 임시세션에 저장해뒀다가 그걸 보여주고 닫을때 세션 정리하면 되는거지

기존회원이 가입은 했는데 개인정보 설정 정 (개인정보 입력 + 분산저장소 설정)을 안했다면 
로그인 → 개인정보 입력 페이지 → 분산저장소 설정 페이지 → 정보제공화면에서 jwt읽어서 표시해주고 닫을떄 세션 정리하면 되는거고 

만약에 요청하는 필드 내용이 로그인 했을때 사용자 정보 DB에서 조회해서 쇼핑몰이 요청하는 필드보다 부족하면 
로그인 → 추가정보입력 화면(이떄도 이미 있는정보는 비활성화 된 인풋에 가져와서 표시 없는 정보만 받음) → Firebase 업데이트 → 정보제공화면
이때까지도 jwt 임시세션에 유지했다가 팝업 닫히면 정리해주면 되는거고  이런식으로 하면 되는거지 다 제대로 수정된거 맞아?

우선 로그인 유무를 먼저 확인하고 로그인을 하고 나면 사용자 정보 리얼타임데이터 베이스에서 조회해서 쇼핑몰이 요청하는 필드보다 부족한지 먼저 조회하고 다음 화면으로 이동하던가 해야겠지 

이거 다 커버되는거지?

NEXT_PUBLIC_SSDM_URL=https://morebooks.vercel.app



연결하고 나고 버튼 링크 개인정보 미리보기 -> 미리보기 표시 
{type: 'consent_result', agreed: true, consentType: 'once', shopId: 'hyunji9886', mallId: 'morebooks', … 연결하고 팝업에서 응답받았는데 
개인정보 제공에 동의하지 않으셨습니다. 주문을 진행할 수 없습니다.
